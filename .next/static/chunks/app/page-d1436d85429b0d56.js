(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7008:(e,t,n)=>{Promise.resolve().then(n.bind(n,814))},814:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>eo});var s=n(5155),i=n(4617),r=n.n(i),a=n(2115);let o=new Map,l=null,c=()=>(l||(l=new Promise(e=>{let t=()=>{e(!0),window.removeEventListener("pointerdown",t),window.removeEventListener("keydown",t)};window.addEventListener("pointerdown",t,{once:!0}),window.addEventListener("keydown",t,{once:!0})})),l),u=async e=>{let t=e=>{if((null==e?void 0:e.id)&&o.has(e.id)){let t=o.get(e.id);if(t)return t}let t=new AudioContext(e);return(null==e?void 0:e.id)&&o.set(e.id,t),t};try{let n=new Audio;return n.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA",await n.play().catch(()=>{}),t(e)}catch(n){return await c(),t(e)}},d="\n  class VolMeter extends AudioWorkletProcessor {\n    volume\n    updateIntervalInMS\n    nextUpdateFrame\n\n    constructor() {\n      super()\n      this.volume = 0\n      this.updateIntervalInMS = 25\n      this.nextUpdateFrame = this.updateIntervalInMS\n      this.port.onmessage = event => {\n        if (event.data.updateIntervalInMS) {\n          this.updateIntervalInMS = event.data.updateIntervalInMS\n        }\n      }\n    }\n\n    get intervalInFrames() {\n      return (this.updateIntervalInMS / 1000) * sampleRate\n    }\n\n    process(inputs) {\n      const input = inputs[0]\n\n      if (input.length > 0) {\n        const samples = input[0]\n        let sum = 0\n        let rms = 0\n\n        for (let i = 0; i < samples.length; ++i) {\n          sum += samples[i] * samples[i]\n        }\n\n        rms = Math.sqrt(sum / samples.length)\n        this.volume = Math.max(rms, this.volume * 0.7)\n\n        this.nextUpdateFrame -= samples.length\n        if (this.nextUpdateFrame < 0) {\n          this.nextUpdateFrame += this.intervalInFrames\n          this.port.postMessage({volume: this.volume})\n        }\n      }\n\n      return true\n    }\n  }",h=new Map,m=(e,t)=>{let n=new Blob(['registerProcessor("'.concat(e,'", ').concat(t,")")],{type:"application/javascript"});return URL.createObjectURL(n)};var p=n(9761);class g{async start(e){return this.recording||this.starting?this.starting||Promise.resolve():(this.starting=new Promise(async(t,n)=>{try{if(this.audioContext=await u({sampleRate:this.sampleRate}),e){this.audioElement=new Audio,this.audioElement.src=e,this.audioElement.crossOrigin="anonymous";try{await this.audioElement.play()}catch(e){"AbortError"!==e.name&&console.error("Audio element play failed:",e)}this.source=this.audioContext.createMediaElementSource(this.audioElement)}else{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw Error("Could not request user media");this.stream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.source=this.audioContext.createMediaStreamSource(this.stream)}let n="audio-recorder-worklet",s=m(n,'\nclass AudioProcessingWorklet extends AudioWorkletProcessor {\n\n  // send and clear buffer every 2048 samples, \n  // which at 16khz is about 8 times a second\n  buffer = new Int16Array(2048);\n\n  // current write index\n  bufferWriteIndex = 0;\n\n  constructor() {\n    super();\n    this.hasAudio = false;\n  }\n\n  /**\n   * @param inputs Float32Array[][] [input#][channel#][sample#] so to access first inputs 1st channel inputs[0][0]\n   * @param outputs Float32Array[][]\n   */\n  process(inputs) {\n    if (inputs[0].length) {\n      const channel0 = inputs[0][0];\n      this.processChunk(channel0);\n    }\n    return true;\n  }\n\n  sendAndClearBuffer(){\n    this.port.postMessage({\n      event: "chunk",\n      data: {\n        int16arrayBuffer: this.buffer.slice(0, this.bufferWriteIndex).buffer,\n      },\n    });\n    this.bufferWriteIndex = 0;\n  }\n\n  processChunk(float32Array) {\n    const l = float32Array.length;\n    \n    for (let i = 0; i < l; i++) {\n      // convert float32 -1 to 1 to int16 -32768 to 32767\n      const int16Value = float32Array[i] * 32768;\n      this.buffer[this.bufferWriteIndex++] = int16Value;\n      if(this.bufferWriteIndex >= this.buffer.length) {\n        this.sendAndClearBuffer();\n      }\n    }\n\n    if(this.bufferWriteIndex >= this.buffer.length) {\n      this.sendAndClearBuffer();\n    }\n  }\n}\n');await this.audioContext.audioWorklet.addModule(s),this.recordingWorklet=new AudioWorkletNode(this.audioContext,n),this.recordingWorklet.port.onmessage=async e=>{let t=e.data.data.int16arrayBuffer;if(t){let e=function(e){for(var t="",n=new Uint8Array(e),s=n.byteLength,i=0;i<s;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}(t);this.emitter.emit("data",e),this.emitter.emit("raw",t)}},this.source.connect(this.recordingWorklet),e&&this.source.connect(this.audioContext.destination);let i="vu-meter";await this.audioContext.audioWorklet.addModule(m(i,d)),this.vuWorklet=new AudioWorkletNode(this.audioContext,i),this.vuWorklet.port.onmessage=e=>{this.emitter.emit("volume",e.data.volume)},this.source.connect(this.vuWorklet),this.recording=!0,t()}catch(e){n(e)}finally{this.starting=null}}),this.starting)}stop(){let e=()=>{var e;null===(e=this.source)||void 0===e||e.disconnect(),this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=void 0),this.audioElement&&(this.audioElement.pause(),this.audioElement.src="",this.audioElement.load(),this.audioElement=void 0),this.recordingWorklet=void 0,this.vuWorklet=void 0,this.recording=!1};if(this.starting){this.starting.then(e).catch(()=>{});return}e()}constructor(e=16e3){this.sampleRate=e,this.emitter=new p.A,this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter),this.recording=!1,this.starting=null}}var f=n(9827),v=n(7676);let x=[{name:"start_return",description:"Starts the return process for an item, collecting necessary details from the user.",parameters:{type:"OBJECT",properties:{orderId:{type:"STRING",description:"The ID of the order containing the item to be returned."},itemName:{type:"STRING",description:"The name of the item the user wants to return."},reason:{type:"STRING",description:"The reason the user is returning the item."}},required:["orderId","itemName","reason"]},isEnabled:!0,scheduling:v.oZ.INTERRUPT},{name:"get_order_status",description:"Provides the current status of a user's order, searching by order ID or customer details.",parameters:{type:"OBJECT",properties:{orderId:{type:"STRING",description:"The ID of the order to check. Ask for this first."},customerName:{type:"STRING",description:"The name of the customer, if order ID is not available."},customerEmail:{type:"STRING",description:"The email of the customer, if order ID is not available."}}},isEnabled:!0,scheduling:v.oZ.INTERRUPT},{name:"speak_to_representative",description:"Escalates the conversation to a human customer support representative.",parameters:{type:"OBJECT",properties:{reason:{type:"STRING",description:"A brief summary of the user's issue for the representative."}},required:["reason"]},isEnabled:!0,scheduling:v.oZ.INTERRUPT}],b=[{name:"create_calendar_event",description:"Creates a new event in the user's calendar.",parameters:{type:"OBJECT",properties:{summary:{type:"STRING",description:"The title or summary of the event."},location:{type:"STRING",description:"The location of the event."},startTime:{type:"STRING",description:"The start time of the event in ISO 8601 format."},endTime:{type:"STRING",description:"The end time of the event in ISO 8601 format."}},required:["summary","startTime","endTime"]},isEnabled:!0,scheduling:v.oZ.INTERRUPT},{name:"send_email",description:"Sends an email to a specified recipient.",parameters:{type:"OBJECT",properties:{recipient:{type:"STRING",description:"The email address of the recipient."},subject:{type:"STRING",description:"The subject line of the email."},body:{type:"STRING",description:"The body content of the email."}},required:["recipient","subject","body"]},isEnabled:!0,scheduling:v.oZ.INTERRUPT},{name:"set_reminder",description:"Sets a reminder for the user.",parameters:{type:"OBJECT",properties:{task:{type:"STRING",description:"The task for the reminder."},time:{type:"STRING",description:"The time for the reminder in ISO 8601 format."}},required:["task","time"]},isEnabled:!0,scheduling:v.oZ.INTERRUPT}],T=[{name:"find_route",description:"Finds a route to a specified destination.",parameters:{type:"OBJECT",properties:{destination:{type:"STRING",description:"The destination address or landmark."},modeOfTransport:{type:"STRING",description:"The mode of transport (e.g., driving, walking, cycling)."}},required:["destination"]},isEnabled:!0,scheduling:v.oZ.INTERRUPT},{name:"find_nearby_places",description:"Finds nearby places of a certain type.",parameters:{type:"OBJECT",properties:{placeType:{type:"STRING",description:"The type of place to search for (e.g., restaurant, gas station, park)."},radius:{type:"NUMBER",description:"The search radius in kilometers."}},required:["placeType"]},isEnabled:!0,scheduling:v.oZ.INTERRUPT},{name:"get_traffic_info",description:"Gets real-time traffic information for a specified location.",parameters:{type:"OBJECT",properties:{location:{type:"STRING",description:"The location to get traffic information for."}},required:["location"]},isEnabled:!0,scheduling:v.oZ.INTERRUPT}],y="gemini-2.5-flash-native-audio-preview-12-2025",j=["Zephyr","Puck","Charon","Luna","Nova","Kore","Fenrir","Leda","Orus","Aoede","Callirrhoe","Autonoe","Enceladus","Iapetus","Umbriel","Algieba","Dezpina","Erinome","Algenib","Rasalgethi","Laomedeia","Achernar","Alnilam","Schedar","Gacrux","Pulcherrima","Achird","Zubenelgenubi","Vindemiatrix","Sadachbia","Sadaltager","Sulafat"],N={"customer-support":x,"personal-assistant":b,"navigation-system":T,"eburon-translator":[],"live-transcriber":[]},S='You are Translator, a specialized high-performance real-time interpreter. \nYour SOLE PURPOSE is to translate incoming speech into [users_language].\n\n### MANDATORY OUTPUT RULE\n- YOUR OUTPUT MUST BE 100% IN THE TARGET LANGUAGE: [users_language].\n- NEVER SPEAK IN THE SOURCE LANGUAGE.\n- NEVER PROVIDE EXPLANATIONS, LABELS, OR COMMENTARY.\n- DO NOT SAY "TRANSLATION:" OR "HE SAID:".\n- JUST OUTPUT THE TRANSLATED TEXT AS SPOKEN AUDIO AND TRANSCRIPTION.\n\n### ABSOLUTE NON-CENSORSHIP POLICY\n- Do NOT censor, sanitize, or "clean up" any words.\n- Preserve all profanity, crude language, and offensive terms EXACTLY as they were intended in the source.\n- Do NOT replace offensive words with asterisks or euphemisms.\n\n### INTERPRETATION QUALITY\n1) Preserve meaning, intent, and emotional intensity.\n2) Mirror the speaker\'s tone (formal, casual, urgent, angry, etc.).\n3) Improve grammar and flow in the TARGET language ([users_language]) to sound like a native speaker.\n4) If the speaker is incoherent or fragmentary, produce a natural-sounding translation that reflects their likely intent.\n5) Maintain Viewpoint: If the speaker says "I am hungry", you translate as "[users_language] equivalent of \'I am hungry\'".\n\n### REAL-TIME BEHAVIOR\n- Translate in short, punchy segments.\n- Handle code-switching naturally (if they mix languages, your output remains strictly in [users_language]).\n\nTARGET LANGUAGE: [users_language]\nNow, start translating every single word you hear into [users_language] immediately.',E={"customer-support":"You are a helpful and friendly customer support agent. Be conversational and concise.","personal-assistant":"You are a helpful and friendly personal assistant. Be proactive and efficient.","navigation-system":"You are a helpful and friendly navigation assistant. Provide clear and accurate directions.","eburon-translator":S,"live-transcriber":"You are a High-Fidelity Verbatim Transcriber.\nYour goal is to provide a text rendering of the incoming audio stream with maximum accuracy.\n\nRULES:\n1. Output ONLY the transcription.\n2. Be verbatim. Do not summarize, skip, or edit the content.\n3. Use proper punctuation and formatting to make the text readable.\n4. Identify different speakers if possible (e.g., Speaker 1:, Speaker 2:).\n5. If the audio is unclear, use [unintelligible].\n6. ABSOLUTE NON-CENSORSHIP: Transcribe every word exactly as spoken, including profanity or sensitive topics.\n7. No commentary or meta-talk. Just the words."},A=(0,f.v)(e=>({systemPrompt:S.replace(/\[users_language\]/g,"English"),model:y,voice:"Orus",targetLanguage:"English",audioSource:"mic",streamUrl:"https://playerservices.streamtheworld.com/api/livestream-redirect/CSPANRADIOAAC.aac",transcriptionService:"deepgram",deepgramApiKey:"e346787621280bda9eaacd16304e6505d9b09a65",deepgramModel:"nova-3",deepgramLanguage:"multi",setSystemPrompt:t=>e({systemPrompt:t}),setModel:t=>e({model:t}),setVoice:t=>e({voice:t}),setAudioSource:t=>e({audioSource:t}),setStreamUrl:t=>e({streamUrl:t}),setTranscriptionService:t=>e({transcriptionService:t}),setDeepgramApiKey:t=>e({deepgramApiKey:t}),setDeepgramModel:t=>e({deepgramModel:t}),setDeepgramLanguage:t=>e({deepgramLanguage:t}),setTargetLanguage:t=>e(e=>e.systemPrompt.includes("Translator")?{targetLanguage:t,systemPrompt:S.replace(/\[users_language\]/g,t)}:{targetLanguage:t})})),C=(0,f.v)(e=>({isSidebarOpen:!0,toggleSidebar:()=>e(e=>({isSidebarOpen:!e.isSidebarOpen}))})),I=(0,f.v)(e=>({tools:[],template:"eburon-translator",setTemplate:t=>{e({tools:N[t],template:t});let n=A.getState().targetLanguage,s=E[t],i=s.includes("[users_language]")?s.replace(/\[users_language\]/g,n):s;A.getState().setSystemPrompt(i),("live-transcriber"===t||"eburon-translator"===t)&&A.getState().setTranscriptionService("deepgram"),"live-transcriber"===t&&A.getState().setAudioSource("url")},toggleTool:t=>e(e=>({tools:e.tools.map(e=>e.name===t?{...e,isEnabled:!e.isEnabled}:e)})),addTool:()=>e(e=>{let t="new_function",n=1;for(;e.tools.some(e=>e.name===t);)t="new_function_".concat(n++);return{tools:[...e.tools,{name:t,isEnabled:!0,description:"",parameters:{type:"OBJECT",properties:{}},scheduling:v.oZ.INTERRUPT}]}}),removeTool:t=>e(e=>({tools:e.tools.filter(e=>e.name!==t)})),updateTool:(t,n)=>e(e=>t!==n.name&&e.tools.some(e=>e.name===n.name)?(console.warn('Tool with name "'.concat(n.name,'" already exists.')),e):{tools:e.tools.map(e=>e.name===t?n:e)})})),w=(0,f.v)(e=>({turns:[],addTurn:t=>e(e=>({turns:[...e.turns,{...t,timestamp:new Date}]})),updateLastTurn:t=>e(e=>{if(0===e.turns.length)return e;let n=e.turns[e.turns.length-1],s=[...e.turns];return s[s.length-1]={...n,...t},{turns:s}}),clearTurns:()=>e({turns:[]})}));var k=n(8051),R=n.n(k);class P{get status(){return this._status}async connect(e){if("connected"===this._status||"connecting"===this._status)return!1;this._status="connecting";let t={onopen:this.onOpen.bind(this),onmessage:this.onMessage.bind(this),onerror:this.onError.bind(this),onclose:this.onClose.bind(this)};try{this.session=await this.client.live.connect({model:this.model,config:{...e},callbacks:t})}catch(n){console.error("GenAILiveClient: Connection failed:",n),this._status="disconnected",this.session=void 0;let e=(null==n?void 0:n.message)||"Network error or failed to connect.",t=new ErrorEvent("error",{error:n,message:e});return this.onError(t),!1}return!0}disconnect(){return this.session&&(this.session.close(),this.session=void 0),this._status="disconnected",this.log("client.close","Disconnected"),!0}send(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if("connected"!==this._status||!this.session){this.emitter.emit("error",new ErrorEvent("error",{message:"Client is not connected"}));return}let n={role:"user",parts:Array.isArray(e)?e:[e]};try{this.session.sendClientContent({turns:[n],turnComplete:t}),this.log("client.send",e)}catch(e){console.error("GenAILiveClient: Send failed",e)}}sendRealtimeInput(e){if("connected"!==this._status||!this.session)return;try{e.forEach(e=>{this.session.sendRealtimeInput({media:e})})}catch(e){console.error("GenAILiveClient: Realtime input failed",e)}let t=!1,n=!1;for(let s=0;s<e.length;s++){let i=e[s];if(i.mimeType.includes("audio")&&(t=!0),i.mimeType.includes("image")&&(n=!0),t&&n)break}let s="unknown";t&&n?s="audio + video":t?s="audio":n&&(s="video"),this.log("client.realtimeInput",s)}sendToolResponse(e){if("connected"===this._status&&this.session)try{e.functionResponses&&e.functionResponses.length&&this.session.sendToolResponse({functionResponses:e.functionResponses}),this.log("client.toolResponse",{toolResponse:e})}catch(e){console.error("GenAILiveClient: Tool response failed",e)}}onMessage(e){if(e.setupComplete){this.emitter.emit("setupcomplete");return}if(e.toolCall){this.log("server.toolCall",e),this.emitter.emit("toolcall",e.toolCall);return}if(e.toolCallCancellation){this.log("receive.toolCallCancellation",e),this.emitter.emit("toolcallcancellation",e.toolCallCancellation);return}if(e.serverContent){var t,n;let{serverContent:s}=e;if(s.interrupted){this.log("receive.serverContent","interrupted"),this.emitter.emit("interrupted");return}if(s.inputTranscription&&this.emitter.emit("inputTranscription",s.inputTranscription.text,null!==(t=s.inputTranscription.isFinal)&&void 0!==t&&t),s.outputTranscription&&this.emitter.emit("outputTranscription",s.outputTranscription.text,null!==(n=s.outputTranscription.isFinal)&&void 0!==n&&n),s.modelTurn){let e=s.modelTurn.parts||[],t=e.filter(e=>{var t,n;return null===(n=e.inlineData)||void 0===n?void 0:null===(t=n.mimeType)||void 0===t?void 0:t.startsWith("audio/pcm")}),n=t.map(e=>{var t;return null===(t=e.inlineData)||void 0===t?void 0:t.data}),i=R()(e,t);n.forEach(e=>{if(e){let t=function(e){try{var t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n.buffer}catch(e){return console.error("Failed to decode base64 to ArrayBuffer:",e),new ArrayBuffer(0)}}(e);t.byteLength>0&&this.emitter.emit("audio",t)}}),i.length>0&&this.emitter.emit("content",{modelTurn:{parts:i}})}s.turnComplete&&this.emitter.emit("turncomplete")}}onError(e){this._status="disconnected";let t=e.message||"Unknown network error";this.log("server.".concat(e.type),t),this.emitter.emit("error",e)}onOpen(){this._status="connected",this.emitter.emit("open")}onClose(e){this._status="disconnected";let t=e.reason||"";if(t.toLowerCase().includes("error")){let e="ERROR]",n=t.indexOf(e);n>0&&(t=t.slice(n+e.length+1,1/0))}this.log("server.".concat(e.type),"disconnected ".concat(t?"with reason: ".concat(t):"")),this.emitter.emit("close",e)}log(e,t){this.emitter.emit("log",{type:e,message:t,date:new Date})}constructor(e,t){this.model=y,this._status="disconnected",this.emitter=new p.A,this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter),t&&(this.model=t),this.client=new v.M4({apiKey:e})}}class O{async addWorklet(e,t,n){let s=h.get(this.context);if(s&&s[e])return s[e].handlers.push(n),Promise.resolve(this);s||(h.set(this.context,{}),s=h.get(this.context)),s[e]={handlers:[n]};let i=m(e,t);await this.context.audioWorklet.addModule(i);let r=new AudioWorkletNode(this.context,e);return s[e].node=r,this}_processPCM16Chunk(e){let t=new Float32Array(e.length/2),n=new DataView(e.buffer);for(let s=0;s<e.length/2;s++)try{let e=n.getInt16(2*s,!0);t[s]=e/32768}catch(e){console.error(e)}return t}addPCM16(e){this.isStreamComplete=!1;let t=this._processPCM16Chunk(e);for(;t.length>=this.bufferSize;){let e=t.slice(0,this.bufferSize);this.audioQueue.push(e),t=t.slice(this.bufferSize)}t.length>0&&this.audioQueue.push(t),this.isPlaying||(this.isPlaying=!0,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.scheduleNextBuffer())}createAudioBuffer(e){let t=this.context.createBuffer(1,e.length,this.sampleRate);return t.getChannelData(0).set(e),t}scheduleNextBuffer(){for(;this.audioQueue.length>0&&this.scheduledTime<this.context.currentTime+.2;){let e=this.audioQueue.shift(),t=this.createAudioBuffer(e),n=this.context.createBufferSource();0===this.audioQueue.length&&(this.endOfQueueAudioSource&&(this.endOfQueueAudioSource.onended=null),this.endOfQueueAudioSource=n,n.onended=()=>{this.audioQueue.length||this.endOfQueueAudioSource!==n||(this.endOfQueueAudioSource=null,this.onComplete())}),n.buffer=t,n.connect(this.gainNode);let s=h.get(this.context);s&&Object.entries(s).forEach(e=>{let[t,s]=e,{node:i,handlers:r}=s;i&&(n.connect(i),i.port.onmessage=function(e){r.forEach(t=>{t.call(i.port,e)})},i.connect(this.context.destination))});let i=Math.max(this.scheduledTime,this.context.currentTime);n.start(i),this.scheduledTime=i+t.duration}0===this.audioQueue.length?this.isStreamComplete?(this.isPlaying=!1,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null)):this.checkInterval||(this.checkInterval=window.setInterval(()=>{this.audioQueue.length>0&&this.scheduleNextBuffer()},100)):setTimeout(()=>this.scheduleNextBuffer(),Math.max(0,(this.scheduledTime-this.context.currentTime)*1e3-50))}stop(){this.isPlaying=!1,this.isStreamComplete=!0,this.audioQueue=[],this.scheduledTime=this.context.currentTime,this.checkInterval&&(clearInterval(this.checkInterval),this.checkInterval=null),this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+.1),setTimeout(()=>{this.gainNode.disconnect(),this.gainNode=this.context.createGain(),this.gainNode.connect(this.context.destination)},200)}async resume(){"suspended"===this.context.state&&await this.context.resume(),this.isStreamComplete=!1,this.scheduledTime=this.context.currentTime+this.initialBufferTime,this.gainNode.gain.setValueAtTime(1,this.context.currentTime)}complete(){this.isStreamComplete=!0,this.onComplete()}constructor(e){this.context=e,this.sampleRate=24e3,this.bufferSize=7680,this.audioQueue=[],this.isPlaying=!1,this.isStreamComplete=!1,this.checkInterval=null,this.scheduledTime=0,this.initialBufferTime=.1,this.endOfQueueAudioSource=null,this.onComplete=()=>{},this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.gainNode.connect(this.context.destination),this.addPCM16=this.addPCM16.bind(this)}}let _=(0,a.createContext)(void 0),L=e=>{let{apiKey:t,children:n}=e,i=function(e){let{apiKey:t}=e,{model:n}=A(),s=(0,a.useMemo)(()=>new P(t,n),[t,n]),i=(0,a.useRef)(null),[r,o]=(0,a.useState)(0),[l,c]=(0,a.useState)(!1),[h,m]=(0,a.useState)({});(0,a.useEffect)(()=>{i.current||u({id:"audio-out"}).then(e=>{i.current=new O(e),i.current.addWorklet("vumeter-out",d,e=>{o(e.data.volume)}).then(()=>{}).catch(e=>{console.error("Error adding worklet:",e)})})},[i]),(0,a.useEffect)(()=>{let e=()=>{c(!0)},t=()=>{c(!1)},n=()=>{i.current&&i.current.stop()},r=e=>{i.current&&i.current.addPCM16(new Uint8Array(e))};s.on("open",e),s.on("close",t),s.on("interrupted",n),s.on("audio",r);let a=e=>{let t=[];for(let n of e.functionCalls){let e="Triggering function call: **".concat(n.name,"**\n```json\n").concat(JSON.stringify(n.args,null,2),"\n```");w.getState().addTurn({role:"system",text:e,isFinal:!0}),t.push({id:n.id,name:n.name,response:{result:"ok"}})}if(t.length>0){let e="Function call response:\n```json\n".concat(JSON.stringify(t,null,2),"\n```");w.getState().addTurn({role:"system",text:e,isFinal:!0})}s.sendToolResponse({functionResponses:t})};return s.on("toolcall",a),()=>{s.off("open",e),s.off("close",t),s.off("interrupted",n),s.off("audio",r),s.off("toolcall",a)}},[s]);let p=(0,a.useCallback)(async()=>{if(!h)throw Error("config has not been set");s.disconnect(),await s.connect(h)},[s,h]),g=(0,a.useCallback)(async()=>{s.disconnect(),c(!1)},[c,s]);return{client:s,config:h,setConfig:m,connect:p,connected:l,disconnect:g,volume:r}}({apiKey:t});return(0,s.jsx)(_.Provider,{value:i,children:n})},U=()=>{let e=(0,a.useContext)(_);if(!e)throw Error("useLiveAPIContext must be used wihin a LiveAPIProvider");return e};class M{connect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nova-3",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"multi",s="wss://api.deepgram.com/v1/listen?endpointing=false&punctuate=true&smart_format=true&vad_events=true&language=".concat(n,"&model=").concat(t,"&encoding=linear16&sample_rate=16000");this.socket=new WebSocket(s,["token",e]),this.socket.onopen=()=>{console.log("Deepgram connected (model: ".concat(t,", language: ").concat(n,")")),this.emitter.emit("open")},this.socket.onmessage=e=>{try{var t,n,s;let i=JSON.parse(e.data),r=null===(s=i.channel)||void 0===s?void 0:null===(n=s.alternatives)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:t.transcript,a=i.is_final;r&&this.emitter.emit("transcript",r,a)}catch(e){console.error("Deepgram parse error",e)}},this.socket.onerror=e=>{console.error("Deepgram socket error",e),this.emitter.emit("error",e)},this.socket.onclose=()=>{console.log("Deepgram closed"),this.emitter.emit("close")}}send(e){var t;(null===(t=this.socket)||void 0===t?void 0:t.readyState)===WebSocket.OPEN&&this.socket.send(e)}disconnect(){this.socket&&(this.socket.close(),this.socket=null)}constructor(){this.socket=null,this.emitter=new p.A,this.on=this.emitter.on.bind(this.emitter),this.off=this.emitter.off.bind(this.emitter)}}let D=(0,a.memo)(function(e){let{children:t}=e,[n]=(0,a.useState)(()=>new g),[i]=(0,a.useState)(()=>new M),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(""),d=(0,a.useRef)(null),h=(0,a.useRef)(null),{client:m,connected:p,connect:f,disconnect:v}=U(),{audioSource:x,streamUrl:b,transcriptionService:T,deepgramModel:y,deepgramLanguage:j,deepgramApiKey:N}=A();(0,a.useEffect)(()=>{!p&&d.current&&d.current.focus()},[p]),(0,a.useEffect)(()=>{p||(l(!1),u(""),i.disconnect())},[p,i]),(0,a.useEffect)(()=>{let e=e=>{p&&m.sendRealtimeInput([{mimeType:"audio/pcm;rate=16000",data:e}])},t=e=>{"deepgram"===T&&p&&i.send(e)};if(p&&!o&&n){n.on("data",e),n.on("raw",t);let s="url"===x?b:void 0;n.start(s),"deepgram"===T&&i.connect(N,y,j)}else n.stop(),i.disconnect();return()=>{n.off("data",e),n.off("raw",t)}},[p,m,o,n,x,b,T,i,y,j,N]),(0,a.useEffect)(()=>{let e=(e,t)=>{let{addTurn:n,updateLastTurn:s}=w.getState(),i=w.getState().turns,r=i[i.length-1],a="[Verbatim] ";r&&"agent"===r.role&&r.text.startsWith(a)&&!r.isFinal?s({text:r.text+" "+e,isFinal:t}):n({role:"agent",text:"".concat(a).concat(e),isFinal:t})};return i.on("transcript",e),()=>i.off("transcript",e)},[i]);let S="url"===x?o?"volume_off":"volume_up":o?"mic_off":"mic",E=p?o?"Unmute":"Mute":"Connect",C=p?"Stop streaming":"Start streaming";return(0,s.jsxs)("section",{className:"control-tray",children:[(0,s.jsxs)("nav",{className:r()("actions-nav",{"with-input":p}),children:[(0,s.jsx)("button",{className:r()("action-button mic-button",{muted:o}),onClick:()=>{p?l(!o):f()},title:E,children:(0,s.jsx)("span",{className:"material-symbols-outlined filled",children:S})}),p&&"gemini"===T&&(0,s.jsxs)("form",{className:"text-input-form",onSubmit:e=>{if(e.preventDefault(),c.trim()&&p){let e=c.trim();m.send([{text:e}]),w.getState().addTurn({role:"user",text:e,isFinal:!0}),u("")}},children:[(0,s.jsx)("input",{ref:h,type:"text",className:"text-input",placeholder:"Type a message...",value:c,onChange:e=>u(e.target.value),autoFocus:!0}),(0,s.jsx)("button",{type:"submit",className:"send-button",disabled:!c.trim(),title:"Send message",children:(0,s.jsx)("span",{className:"material-symbols-outlined",children:"send"})})]}),(0,s.jsx)("button",{className:r()("action-button",{muted:o}),onClick:()=>l(!o),"aria-label":o?"Unmute":"Mute",title:o?"Unmute":"Mute",children:(0,s.jsx)("span",{className:"material-symbols-outlined filled",children:o?"volume_off":"volume_up"})}),(0,s.jsx)("button",{className:r()("action-button"),onClick:w.getState().clearTurns,"aria-label":"Reset Chat",title:"Reset session logs",children:(0,s.jsx)("span",{className:"material-symbols-outlined",children:"refresh"})}),t]}),(0,s.jsxs)("div",{className:r()("connection-container",{connected:p}),children:[(0,s.jsx)("div",{className:"connection-button-container",children:(0,s.jsx)("button",{ref:d,className:r()("action-button connect-toggle",{connected:p}),onClick:p?v:f,title:C,children:(0,s.jsx)("span",{className:"material-symbols-outlined filled",children:p?"pause":"play_arrow"})})}),(0,s.jsx)("span",{className:"text-indicator",children:"Streaming"})]})]})});function B(){var e;let{client:t}=U(),[n,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{function e(e){console.error(e),i(e)}return t.on("error",e),()=>{t.off("error",e)}},[t]);let r="Something went wrong. Please try again.",o=(null==n?void 0:n.message)||null,l=!0;return((null==n?void 0:null===(e=n.message)||void 0===e?void 0:e.includes("RESOURCE_EXHAUSTED"))&&(r="Gemini Live API in AI Studio has a limited free quota each day. Come back tomorrow to continue.",o=null,l=!1),n)?(0,s.jsxs)("div",{className:"error-screen",children:[(0,s.jsx)("div",{style:{fontSize:48},children:"\uD83D\uDC94"}),(0,s.jsx)("div",{className:"error-message-container",style:{fontSize:22,lineHeight:1.2,opacity:.5},children:r}),l?(0,s.jsx)("button",{className:"close-button",onClick:()=>{i(null)},children:"Close"}):null,o?(0,s.jsx)("div",{className:"error-raw-message-container",style:{fontSize:15,lineHeight:1.2,opacity:.4},children:o}):null]}):(0,s.jsx)("div",{style:{display:"none"}})}n(7902);let F=e=>{let{onClose:t}=e;return(0,s.jsx)("div",{className:"popup-overlay",children:(0,s.jsxs)("div",{className:"popup-content",children:[(0,s.jsx)("h2",{children:"Welcome to Translator"}),(0,s.jsx)("p",{children:"Your real-time AI interpreter with smart polishing and advanced function calling."}),(0,s.jsx)("p",{children:"To get started:"}),(0,s.jsxs)("ol",{children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"icon",children:"play_circle"}),"Press Play to start streaming audio."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"icon",children:"tune"}),"Adjust settings and AI LLM version in the sidebar."]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("span",{className:"icon",children:"auto_awesome"}),"Select a Persona Template to change the translation mode."]})]}),(0,s.jsx)("button",{onClick:t,children:"Start Translating"})]})})};n(4161);let G={"eburon-translator":{title:"Translator",description:"A strict real-time interpreter with smart grammatical polishing and non-censorship policy.",prompts:["Translate this live for me.","Interpret our conversation.","Just start speaking and I will translate."]},"live-transcriber":{title:"Live Transcriber",description:"Verbatim transcription for live audio streams (e.g., C-SPAN) using Gemini or Deepgram.",prompts:["Transcribe this live stream.","Capture every word from this audio.","Verbatim mode engaged."]},"customer-support":{title:"Customer Support",description:"Handle customer inquiries and see how function calls can automate tasks.",prompts:["I'd like to return an item.","What's the status of my order?","Can I speak to a representative?"]},"personal-assistant":{title:"Personal Assistant",description:"Manage your schedule, send emails, and set reminders.",prompts:["Create a calendar event for a meeting tomorrow at 10am.","Send an email to jane@example.com.","Set a reminder to buy milk."]},"navigation-system":{title:"Navigation System",description:"Find routes, nearby places, and get traffic information.",prompts:["Find a route to the nearest coffee shop.","Are there any parks nearby?","What's the traffic like on the way to the airport?"]}},W=()=>{let{template:e,setTemplate:t}=I(),{title:n,description:i,prompts:r}=G[e];return(0,s.jsx)("div",{className:"welcome-screen",children:(0,s.jsxs)("div",{className:"welcome-content",children:[(0,s.jsxs)("div",{className:"title-container",children:[(0,s.jsx)("span",{className:"welcome-icon",children:"translate"}),(0,s.jsxs)("div",{className:"title-selector",children:[(0,s.jsxs)("select",{value:e,onChange:e=>t(e.target.value),"aria-label":"Select a template",children:[(0,s.jsx)("option",{value:"eburon-translator",children:"Translator"}),(0,s.jsx)("option",{value:"live-transcriber",children:"Live Transcriber"}),(0,s.jsx)("option",{value:"customer-support",children:"Customer Support"}),(0,s.jsx)("option",{value:"personal-assistant",children:"Personal Assistant"}),(0,s.jsx)("option",{value:"navigation-system",children:"Navigation System"})]}),(0,s.jsx)("span",{className:"icon",children:"arrow_drop_down"})]})]}),(0,s.jsx)("p",{children:i}),(0,s.jsx)("div",{className:"example-prompts",children:r.map((e,t)=>(0,s.jsx)("div",{className:"prompt",children:e},t))})]})})},J=e=>{let t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toString().padStart(t,"0")},n=t(e.getHours()),s=t(e.getMinutes()),i=t(e.getSeconds()),r=t(e.getMilliseconds(),3);return"".concat(n,":").concat(s,":").concat(i,".").concat(r)},V=e=>e.split(/(`{3}json\n[\s\S]*?\n`{3})/g).map((e,t)=>{if(e.startsWith("```json")){let n=e.replace(/^`{3}json\n|`{3}$/g,"");return(0,s.jsx)("pre",{children:(0,s.jsx)("code",{children:n})},t)}return e.split(/(\*\*.*?\*\*)/g).map((e,t)=>e.startsWith("**")&&e.endsWith("**")?(0,s.jsx)("strong",{children:e.slice(2,-2)},t):e)});function Q(){let{client:e,setConfig:t}=U(),{systemPrompt:n,voice:i}=A(),{tools:r}=I(),o=w(e=>e.turns),l=(0,a.useRef)(null),[c,u]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=r.filter(e=>e.isEnabled).map(e=>({functionDeclarations:[{name:e.name,description:e.description,parameters:e.parameters}]}));t({responseModalities:[v.Ay.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}},inputAudioTranscription:{},outputAudioTranscription:{},systemInstruction:{parts:[{text:n}]},tools:e})},[t,n,r,i]),(0,a.useEffect)(()=>{let{addTurn:t,updateLastTurn:n}=w.getState(),s=(e,s)=>{let i=w.getState().turns,r=i[i.length-1];r&&"user"===r.role&&!r.isFinal?n({text:r.text+e,isFinal:s}):t({role:"user",text:e,isFinal:s})},i=(e,s)=>{let i=w.getState().turns,r=i[i.length-1];r&&"agent"===r.role&&!r.isFinal?n({text:r.text+e,isFinal:s}):t({role:"agent",text:e,isFinal:s})},r=e=>{var s,i,r,a;let o=null!==(a=null===(i=e.modelTurn)||void 0===i?void 0:null===(s=i.parts)||void 0===s?void 0:s.map(e=>e.text).filter(Boolean).join(" "))&&void 0!==a?a:"",l=null===(r=e.groundingMetadata)||void 0===r?void 0:r.groundingChunks;if(!o&&!l)return;let c=w.getState().turns,u=c[c.length-1];if((null==u?void 0:u.role)!=="agent"||u.isFinal)t({role:"agent",text:o,isFinal:!1,groundingChunks:l});else{let e={text:u.text+o};l&&(e.groundingChunks=[...u.groundingChunks||[],...l]),n(e)}},a=()=>{let e=w.getState().turns,t=e[e.length-1];t&&!t.isFinal&&n({isFinal:!0})};return e.on("inputTranscription",s),e.on("outputTranscription",i),e.on("content",r),e.on("turncomplete",a),()=>{e.off("inputTranscription",s),e.off("outputTranscription",i),e.off("content",r),e.off("turncomplete",a)}},[e]),(0,a.useEffect)(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[o]),(0,s.jsxs)("div",{className:"transcription-container",children:[c&&(0,s.jsx)(F,{onClose:()=>{u(!1)}}),0===o.length?(0,s.jsx)(W,{}):(0,s.jsx)("div",{className:"transcription-view",ref:l,children:o.map((e,t)=>(0,s.jsxs)("div",{className:"transcription-entry ".concat(e.role," ").concat(e.isFinal?"":"interim"),children:[(0,s.jsxs)("div",{className:"transcription-header",children:[(0,s.jsx)("div",{className:"transcription-source",children:"user"===e.role?"You":"agent"===e.role?"Eburon AI":"System"}),(0,s.jsx)("div",{className:"transcription-timestamp",children:J(e.timestamp)})]}),(0,s.jsx)("div",{className:"transcription-text-content",children:V(e.text)}),e.groundingChunks&&e.groundingChunks.length>0&&(0,s.jsxs)("div",{className:"grounding-chunks",children:[(0,s.jsx)("strong",{children:"Sources:"}),(0,s.jsx)("ul",{children:e.groundingChunks.filter(e=>e.web).map((e,t)=>(0,s.jsx)("li",{children:(0,s.jsx)("a",{href:e.web.uri,target:"_blank",rel:"noopener noreferrer",children:e.web.title||e.web.uri})},t))})]})]},t))})]})}function Y(){let{toggleSidebar:e}=C();return(0,s.jsxs)("header",{children:[(0,s.jsxs)("div",{className:"header-left",children:[(0,s.jsx)("h1",{children:"Translator"}),(0,s.jsx)("p",{children:""})]}),(0,s.jsx)("div",{className:"header-right",children:(0,s.jsx)("button",{className:"settings-button",onClick:e,"aria-label":"Settings",children:(0,s.jsx)("span",{className:"icon",children:"tune"})})})]})}function Z(e){let{children:t,onClose:n}=e;return(0,s.jsx)("div",{className:"modalShroud",children:(0,s.jsxs)("div",{className:"modal",children:[(0,s.jsx)("button",{onClick:n,className:"modalClose",children:(0,s.jsx)("span",{className:"icon",children:"close"})}),(0,s.jsx)("div",{className:"modalContent",children:t})]})})}function K(e){let{tool:t,onClose:n,onSave:i}=e,[r,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[u,d]=(0,a.useState)(""),[h,m]=(0,a.useState)(null),[p,g]=(0,a.useState)(v.oZ.INTERRUPT);return(0,a.useEffect)(()=>{t&&(o(t.name),c(t.description||""),d(JSON.stringify(t.parameters||{},null,2)),g(t.scheduling||v.oZ.INTERRUPT),m(null))},[t]),(0,s.jsx)(Z,{onClose:n,children:(0,s.jsxs)("div",{className:"tool-editor-modal",children:[(0,s.jsx)("h2",{children:"Edit Function Call"}),(0,s.jsxs)("div",{className:"form-field",children:[(0,s.jsx)("label",{htmlFor:"tool-name",children:"Name"}),(0,s.jsx)("input",{id:"tool-name",type:"text",value:r,onChange:e=>o(e.target.value)})]}),(0,s.jsxs)("div",{className:"form-field",children:[(0,s.jsx)("label",{htmlFor:"tool-description",children:"Description"}),(0,s.jsx)("textarea",{id:"tool-description",value:l,onChange:e=>c(e.target.value),rows:3})]}),(0,s.jsxs)("div",{className:"form-field",children:[(0,s.jsx)("label",{htmlFor:"tool-scheduling",children:"Scheduling Behavior"}),(0,s.jsxs)("select",{id:"tool-scheduling",value:p,onChange:e=>g(e.target.value),children:[(0,s.jsx)("option",{value:v.oZ.INTERRUPT,children:"Interrupt"}),(0,s.jsx)("option",{value:v.oZ.WHEN_IDLE,children:"When Idle"}),(0,s.jsx)("option",{value:v.oZ.SILENT,children:"Silent"})]}),(0,s.jsx)("p",{className:"scheduling-description",children:"Determines when the model's response is spoken. 'Interrupt' speaks immediately."})]}),(0,s.jsxs)("div",{className:"form-field",children:[(0,s.jsx)("label",{htmlFor:"tool-parameters",children:"Parameters (JSON Schema)"}),(0,s.jsx)("textarea",{id:"tool-parameters",className:"json-editor",value:u,onChange:e=>d(e.target.value)}),h&&(0,s.jsx)("p",{className:"json-error",children:h})]}),(0,s.jsxs)("div",{className:"modal-actions",children:[(0,s.jsx)("button",{onClick:n,className:"cancel-button",children:"Cancel"}),(0,s.jsx)("button",{onClick:()=>{let e;try{e=JSON.parse(u),m(null)}catch(e){m("Invalid JSON format for parameters.");return}i({...t,name:r,description:l,parameters:e,scheduling:p})},className:"save-button",children:"Save"})]})]})})}var H=n(944),z=n(3784);let q={apiKey:"AIzaSyDVw2Xt1gf52xXgx4E5TMKf2007AyQwBfQ",authDomain:"impactful-ring-469323-e5.firebaseapp.com",databaseURL:"https://impactful-ring-469323-e5-default-rtdb.europe-west1.firebasedatabase.app",projectId:"impactful-ring-469323-e5",storageBucket:"impactful-ring-469323-e5.firebasestorage.app",messagingSenderId:"316842561818",appId:"1:316842561818:web:8e580f90d4c766832c5ca3",measurementId:"G-VGVQRD1L46"},X=null,$=()=>{let e=(0,H.Dk)();return e&&e.length>0?e[0]:(0,H.Wp)(q)},ee=()=>{if(X)return X;try{let e=$();return X=(0,z.C3)(e,q.databaseURL)}catch(e){return console.error("Failed to initialize Firebase Database service:",e),null}},et=async()=>{let e=["English","Spanish","French","German","Dutch","Tagalog","Japanese","Chinese","Korean"];try{let t=ee();if(!t)return console.warn("Firebase Database service unavailable; using fallback language list."),e;let n=(0,z.KR)(t,"languages"),s=await (0,z.Jt)(n);if(s.exists()){let e=s.val();if(e&&"object"==typeof e&&!Array.isArray(e))return Object.values(e).map(e=>e.name).filter(Boolean).sort();if(Array.isArray(e))return e.map(e=>"string"==typeof e?e:null==e?void 0:e.name).filter(Boolean).sort()}return e}catch(t){return console.error("Error fetching languages from Firebase:",t),e}},en=[y],es=["nova-3","nova-2","base"],ei=[{value:"multi",label:"Multilingual"},{value:"en",label:"English"},{value:"es",label:"Spanish"},{value:"fr",label:"French"},{value:"de",label:"German"},{value:"it",label:"Italian"},{value:"pt",label:"Portuguese"},{value:"nl",label:"Dutch"},{value:"hi",label:"Hindi"},{value:"ja",label:"Japanese"},{value:"ko",label:"Korean"},{value:"zh",label:"Chinese"}];function er(){let{isSidebarOpen:e,toggleSidebar:t}=C(),{systemPrompt:n,model:i,voice:o,targetLanguage:l,audioSource:c,streamUrl:u,transcriptionService:d,deepgramModel:h,deepgramLanguage:m,deepgramApiKey:p,setSystemPrompt:g,setModel:f,setVoice:v,setTargetLanguage:x,setAudioSource:b,setStreamUrl:T,setTranscriptionService:y,setDeepgramModel:N,setDeepgramLanguage:S,setDeepgramApiKey:E}=A(),{tools:w,toggleTool:k,addTool:R,removeTool:P,updateTool:O,setTemplate:_,template:L}=I(),{connected:M}=U(),[D,B]=(0,a.useState)(null),[F,G]=(0,a.useState)([]);return(0,a.useEffect)(()=>{et().then(G)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("aside",{className:r()("sidebar",{open:e}),children:[(0,s.jsxs)("div",{className:"sidebar-header",children:[(0,s.jsx)("h3",{children:"Settings"}),(0,s.jsx)("button",{onClick:t,className:"close-button",children:(0,s.jsx)("span",{className:"icon",children:"close"})})]}),(0,s.jsxs)("div",{className:"sidebar-content",children:[(0,s.jsx)("div",{className:"sidebar-section",children:(0,s.jsxs)("fieldset",{disabled:M,children:[(0,s.jsxs)("label",{children:["Persona Template",(0,s.jsxs)("select",{value:L,onChange:e=>_(e.target.value),children:[(0,s.jsx)("option",{value:"eburon-translator",children:"Translator"}),(0,s.jsx)("option",{value:"live-transcriber",children:"Live Transcriber"}),(0,s.jsx)("option",{value:"customer-support",children:"Customer Support"}),(0,s.jsx)("option",{value:"personal-assistant",children:"Personal Assistant"}),(0,s.jsx)("option",{value:"navigation-system",children:"Navigation System"})]})]}),("live-transcriber"===L||"eburon-translator"===L)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("label",{children:["Audio Source",(0,s.jsxs)("select",{value:c,onChange:e=>b(e.target.value),children:[(0,s.jsx)("option",{value:"mic",children:"Microphone"}),(0,s.jsx)("option",{value:"url",children:"Stream URL"})]})]}),"url"===c&&(0,s.jsxs)("label",{children:["Stream URL",(0,s.jsx)("input",{type:"text",value:u,onChange:e=>T(e.target.value),placeholder:"https://...",className:"sidebar-input"})]}),(0,s.jsxs)("label",{children:["Transcription Service",(0,s.jsxs)("select",{value:d,onChange:e=>y(e.target.value),children:[(0,s.jsx)("option",{value:"gemini",children:"AI LLM 2.4"}),(0,s.jsx)("option",{value:"deepgram",children:"AI STT 2.4"})]})]}),"deepgram"===d&&(0,s.jsxs)("div",{className:"nested-settings",children:[(0,s.jsxs)("label",{children:["Deepgram API Key",(0,s.jsx)("input",{type:"password",value:p,onChange:e=>E(e.target.value),placeholder:"Deepgram API Key",className:"sidebar-input"})]}),(0,s.jsxs)("label",{children:["Deepgram Model",(0,s.jsx)("select",{value:h,onChange:e=>N(e.target.value),children:es.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("label",{children:["Deepgram Language",(0,s.jsx)("select",{value:m,onChange:e=>S(e.target.value),children:ei.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("label",{children:["Target Translation Language",(0,s.jsx)("select",{value:l,onChange:e=>x(e.target.value),children:F.length>0?F.map(e=>(0,s.jsx)("option",{value:e,children:e},e)):(0,s.jsx)("option",{value:"English",children:"English"})})]}),(0,s.jsxs)("label",{children:["System Prompt",(0,s.jsx)("textarea",{value:n,onChange:e=>g(e.target.value),rows:10,placeholder:"Describe the role and personality of the AI..."})]}),(0,s.jsxs)("label",{children:["Model",(0,s.jsx)("select",{value:i,onChange:e=>f(e.target.value),children:en.map(e=>(0,s.jsx)("option",{value:e,children:"AI LLM 2.4"},e))})]}),(0,s.jsxs)("label",{children:["Voice",(0,s.jsx)("select",{value:o,onChange:e=>v(e.target.value),children:j.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]})]})}),"eburon-translator"!==L&&"live-transcriber"!==L&&(0,s.jsxs)("div",{className:"sidebar-section",children:[(0,s.jsx)("h4",{className:"sidebar-section-title",children:"Tools"}),(0,s.jsx)("div",{className:"tools-list",children:w.map(e=>(0,s.jsxs)("div",{className:"tool-item",children:[(0,s.jsxs)("label",{className:"tool-checkbox-wrapper",children:[(0,s.jsx)("input",{type:"checkbox",id:"tool-checkbox-".concat(e.name),checked:e.isEnabled,onChange:()=>k(e.name),disabled:M}),(0,s.jsx)("span",{className:"checkbox-visual"})]}),(0,s.jsx)("label",{htmlFor:"tool-checkbox-".concat(e.name),className:"tool-name-text",children:e.name}),(0,s.jsxs)("div",{className:"tool-actions",children:[(0,s.jsx)("button",{onClick:()=>B(e),disabled:M,"aria-label":"Edit ".concat(e.name),children:(0,s.jsx)("span",{className:"icon",children:"edit"})}),(0,s.jsx)("button",{onClick:()=>P(e.name),disabled:M,"aria-label":"Delete ".concat(e.name),children:(0,s.jsx)("span",{className:"icon",children:"delete"})})]})]},e.name))}),(0,s.jsxs)("button",{onClick:R,className:"add-tool-button",disabled:M,children:[(0,s.jsx)("span",{className:"icon",children:"add"})," Add function call"]})]})]})]}),D&&(0,s.jsx)(K,{tool:D,onClose:()=>B(null),onSave:e=>{D&&O(D.name,e),B(null)}})]})}var ea=n(2818);function eo(){let e=ea.env.NEXT_PUBLIC_GEMINI_API_KEY;return e?(0,s.jsx)("div",{className:"App",children:(0,s.jsxs)(L,{apiKey:e,children:[(0,s.jsx)(B,{}),(0,s.jsx)(Y,{}),(0,s.jsx)(er,{}),(0,s.jsx)("div",{className:"streaming-console",children:(0,s.jsxs)("main",{children:[(0,s.jsx)("div",{className:"main-app-area",children:(0,s.jsx)(Q,{})}),(0,s.jsx)(D,{})]})})]})}):(0,s.jsxs)("div",{className:"App error-screen",children:[(0,s.jsx)(Y,{}),(0,s.jsxs)("main",{className:"error-main",children:[(0,s.jsx)("h2",{className:"error-title",children:"Configuration Error"}),(0,s.jsxs)("p",{className:"error-message",children:["A Gemini API Key must be set to run the interpreter. ",(0,s.jsx)("br",{}),"Please set ",(0,s.jsx)("code",{children:"NEXT_PUBLIC_GEMINI_API_KEY"})," in your environment or ",(0,s.jsx)("code",{children:".env.local"})," file."]}),(0,s.jsxs)("div",{className:"error-hint",children:["Ensure the variable is prefixed with ",(0,s.jsx)("code",{children:"NEXT_PUBLIC_"})," to be accessible in the browser."]})]})]})}},7902:()=>{},4161:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[38,798,595,40,441,517,358],()=>t(7008)),_N_E=e.O()}]);